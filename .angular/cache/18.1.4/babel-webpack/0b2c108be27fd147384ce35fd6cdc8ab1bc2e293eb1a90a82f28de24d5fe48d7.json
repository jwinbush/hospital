{"ast":null,"code":"import { ChatMessageDto } from '../../models/chatMessageDto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/web-socket.service\";\nimport * as i2 from \"src/app/services/chat-data-transfer.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/forms\";\nconst _c0 = [\"scrollMe\"];\nfunction ChatComponent_div_13_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 25)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const chatMessage_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", chatMessage_r2.user, \" : \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(chatMessage_r2.message);\n  }\n}\nfunction ChatComponent_div_13_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 26)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const chatMessage_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", chatMessage_r2.user, \" : \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(chatMessage_r2.message);\n  }\n}\nfunction ChatComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, ChatComponent_div_13_li_1_Template, 5, 2, \"li\", 23)(2, ChatComponent_div_13_li_2_Template, 5, 2, \"li\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const chatMessage_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", chatMessage_r2.emailId == ctx_r2.emailId);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", chatMessage_r2.emailId != ctx_r2.emailId);\n  }\n}\nexport let ChatComponent = /*#__PURE__*/(() => {\n  class ChatComponent {\n    constructor(webSocketService, chatService) {\n      this.webSocketService = webSocketService;\n      this.chatService = chatService;\n    }\n    ngOnInit() {\n      this.webSocketService.openWebSocket();\n      this.scrollToBottom();\n    }\n    ngOnDestroy() {\n      this.webSocketService.closeWebSocket();\n    }\n    ngAfterViewChecked() {\n      this.scrollToBottom();\n    }\n    scrollToBottom() {\n      try {\n        this.myScrollContainer.nativeElement.scrollTop = this.myScrollContainer.nativeElement.scrollHeight;\n      } catch (err) {}\n    }\n    sendMessage(sendForm) {\n      this.emailId = this.chatService.emailId;\n      const chatMessageDto = new ChatMessageDto(this.chatService.user, this.chatService.emailId, sendForm.value.message);\n      this.webSocketService.sendMessage(chatMessageDto);\n      sendForm.controls.message.reset();\n      console.log(this.emailId);\n    }\n    static #_ = this.ɵfac = function ChatComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || ChatComponent)(i0.ɵɵdirectiveInject(i1.WebSocketService), i0.ɵɵdirectiveInject(i2.ChatDataTransferService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: ChatComponent,\n      selectors: [[\"app-chat\"]],\n      viewQuery: function ChatComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myScrollContainer = _t.first);\n        }\n      },\n      decls: 29,\n      vars: 1,\n      consts: [[\"scrollMe\", \"\"], [\"sendForm\", \"ngForm\"], [\"routerLink\", \"/home\", 1, \"badge\", \"badge-danger\", \"leave\"], [1, \"chatbox\"], [1, \"container\", \"chatr\"], [1, \"row\"], [1, \"chatroom\", \"col-md-10\", \"col-sm-12\", \"col-xs-12\", \"col-lg-10\", \"d-flex\", \"justify-content-center\"], [1, \"col-md-12\", \"col-sm-12\", \"col-xs-12\", \"col-lg-12\", \"d-flex\", \"justify-content-center\"], [1, \"chatroom_section\", \"chatroom_history\"], [1, \"text-center\", \"head\"], [1, \"list-group\", \"list-group-flush\", \"chatroom_history_list\"], [4, \"ngFor\", \"ngForOf\"], [1, \"chatroom_history_entering\"], [1, \"chatroom_history_entering_spinner\"], [1, \"chatroom_history_entering_label\"], [1, \"chatroom_section\", \"chatroom_form\"], [3, \"ngSubmit\"], [1, \"chat-send\", \"row\"], [1, \"col-md-12\", \"col-sm-12\", \"col-xs-10\"], [\"type\", \"text\", \"Placeholder\", \"Type your message here\", \"name\", \"message\", \"id\", \"input-message\", \"ngModel\", \"\", 1, \"form-control\"], [1, \"col-md-12\", \"col-sm-12\", \"col-xs-12\", \"d-flex\", \"justify-content-center\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", \"submit\", \"grow\"], [\"aria-hidden\", \"true\", 1, \"fa\", \"fa-paper-plane\"], [\"class\", \"list-group-item chatroom_history_list_item chatroom_history_list_right chatroom_history_list_item--grey\", 4, \"ngIf\"], [\"class\", \"list-group-item chatroom_history_list_item chatroom_history_list_left chatroom_history_list_item--grey\", 4, \"ngIf\"], [1, \"list-group-item\", \"chatroom_history_list_item\", \"chatroom_history_list_right\", \"chatroom_history_list_item--grey\"], [1, \"list-group-item\", \"chatroom_history_list_item\", \"chatroom_history_list_left\", \"chatroom_history_list_item--grey\"]],\n      template: function ChatComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r1 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"a\", 2);\n          i0.ɵɵtext(1, \"Leave Chat Room\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 3)(3, \"div\", 4)(4, \"div\", 5)(5, \"div\", 6)(6, \"div\", 7)(7, \"div\", 8)(8, \"h3\", 9);\n          i0.ɵɵtext(9, \"hospital Chat Forum\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(10, \"hr\");\n          i0.ɵɵelementStart(11, \"ul\", 10, 0);\n          i0.ɵɵtemplate(13, ChatComponent_div_13_Template, 3, 2, \"div\", 11);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 12);\n          i0.ɵɵelement(15, \"div\", 13);\n          i0.ɵɵelementStart(16, \"span\", 14);\n          i0.ɵɵtext(17, \" Typing\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(18, \"div\", 7)(19, \"div\", 15)(20, \"form\", 16, 1);\n          i0.ɵɵlistener(\"ngSubmit\", function ChatComponent_Template_form_ngSubmit_20_listener() {\n            i0.ɵɵrestoreView(_r1);\n            const sendForm_r4 = i0.ɵɵreference(21);\n            return i0.ɵɵresetView(ctx.sendMessage(sendForm_r4));\n          });\n          i0.ɵɵelementStart(22, \"div\", 17)(23, \"div\", 18);\n          i0.ɵɵelement(24, \"input\", 19);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"div\", 20)(26, \"button\", 21);\n          i0.ɵɵtext(27, \"Send \");\n          i0.ɵɵelement(28, \"i\", 22);\n          i0.ɵɵelementEnd()()()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(13);\n          i0.ɵɵproperty(\"ngForOf\", ctx.webSocketService.chatMessages);\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i4.RouterLink, i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.NgModel, i5.NgForm],\n      styles: [\".chatr[_ngcontent-%COMP%]{padding:0}.head[_ngcontent-%COMP%]{font-size:600;color:#fff;font-size:18px}.leave[_ngcontent-%COMP%]{position:absolute;top:5px;left:10px;padding:10px;text-decoration:none;z-index:100}.chatbox[_ngcontent-%COMP%]{background-image:radial-gradient(circle farthest-corner at 10% 20%,#00989b80 .1%,#005e78 94.2%);background-image:url(bg.3316b5dbef6a469b.png);min-height:100vh;background-repeat:no-repeat;background-attachment:fixed;background-size:100% 100%}.chatroom[_ngcontent-%COMP%]{width:60%;margin:0 auto;background-color:gray;background-image:radial-gradient(circle farthest-corner at 10% 20%,#00989b .1%,#005e78 94.2%);border-radius:10px;margin-top:5vh;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;position:relative;display:flex;flex-direction:column}#drift-frame-controller[_ngcontent-%COMP%], .drift-conductor-item[_ngcontent-%COMP%]   .drift-frame-chat[_ngcontent-%COMP%]   .drift-frame-chat-align-right[_ngcontent-%COMP%]   .drift-frame--mobile[_ngcontent-%COMP%]{display:none!important}.chatroom_section[_ngcontent-%COMP%]{padding:10px 20px}.chatroom_header_name[_ngcontent-%COMP%]{position:relative}.chatroom_header_name[_ngcontent-%COMP%]:before{content:\\\"<\\\";position:absolute;top:50%;left:0;transform:translatey(-50%);font-weight:900}.chatroom_history[_ngcontent-%COMP%]{flex:2}.chatroom_history_list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;height:52vh;overflow:scroll}.chatroom_history_list_item[_ngcontent-%COMP%]{margin-top:auto;margin-bottom:10px;border-radius:15px;padding:10px 20px;color:#fff}.chatroom_history_list_right[_ngcontent-%COMP%]{align-self:flex-end}.chatroom_history_list_right[_ngcontent-%COMP%]:last-child{background:#5fc9f8}.chatroom_history_list_item--grey[_ngcontent-%COMP%]{background:#f0f0f0e6;color:#000;min-width:30vw}.chatroom_history_list_item--blue[_ngcontent-%COMP%]{background:#147efb}.chatroom_history_entering[_ngcontent-%COMP%]{padding-top:20px}.chatroom_history_entering_spinner[_ngcontent-%COMP%]{display:inline-block;width:10px;height:10px;background:#fff;border-radius:50%;position:relative;margin-left:15px;animation:1.5s _ngcontent-%COMP%_enteringMessage linear infinite;animation-delay:.5s}.chatroom_history_entering_spinner[_ngcontent-%COMP%]:before, .chatroom_history_entering_spinner[_ngcontent-%COMP%]:after{content:\\\"\\\";width:10px;height:10px;background:#c1c1c1;border-radius:50%;position:absolute;top:0}.chatroom_history_entering_spinner[_ngcontent-%COMP%]:before{left:-15px;animation:1.5s _ngcontent-%COMP%_enteringMessage linear infinite}.chatroom_history_entering_spinner[_ngcontent-%COMP%]:after{left:15px;animation:1.5s _ngcontent-%COMP%_enteringMessage linear infinite;animation-delay:.75s}.chatroom_history_entering_label[_ngcontent-%COMP%]{display:inline-block;margin-left:15px;font-size:12px;color:#fff}.chatroom_form[_ngcontent-%COMP%]{border-top:1px solid white}.chatroom_form[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#input-user[_ngcontent-%COMP%]{width:100%!important;box-shadow:none}.submit[_ngcontent-%COMP%]{margin-top:3vh}#input-message[_ngcontent-%COMP%]{width:100%!important;box-shadow:none}.chatroom_form_inputbox[_ngcontent-%COMP%]{flex-basis:70%;max-width:80%}.chatroom_form_sendBtn[_ngcontent-%COMP%]{flex-basis:20%;max-width:20%}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#2f8a8d;border-color:#2f8a8d;border-radius:5px!important;box-shadow:none}.btn-primary[_ngcontent-%COMP%]:hover{color:#000;background-color:#43c7cc;border-color:#43c7cc;outline:none;border-radius:50px!important}.btn[_ngcontent-%COMP%]:focus{outline:none!important}.btn-primary[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .show[_ngcontent-%COMP%] > .btn-primary.dropdown-toggle[_ngcontent-%COMP%]{color:#fff;background-color:#217e81;border-color:#217e81}.btn[_ngcontent-%COMP%]:focus, .btn[_ngcontent-%COMP%]:active:focus, .btn.active[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none}@keyframes _ngcontent-%COMP%_enteringMessage{0%{transform:scale(1);background:#ffffff80}to{transform:scale(.8);background:#e0e0e000}}@media (max-width: 576px){.row[_ngcontent-%COMP%]{--bs-gutter-x: -.5rem !important}.chatroom[_ngcontent-%COMP%]{max-width:95%;width:95%;margin-top:6vh;border-radius:0}.chatroom_history_list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;border-radius:0;flex-direction:column;max-height:50vh;overflow:scroll}#input-user[_ngcontent-%COMP%]{width:100%!important;box-shadow:none;margin-top:3vh}.submit[_ngcontent-%COMP%]{margin:3vh 0}#input-message[_ngcontent-%COMP%]{width:100%!important;box-shadow:none;margin-top:3vh}.chatbox[_ngcontent-%COMP%]{background-image:radial-gradient(circle farthest-corner at 10% 20%,#00989b .1%,#005e78 94.2%);min-height:100vh}.chatr[_ngcontent-%COMP%]{padding:0}}[_ngcontent-%COMP%]::-webkit-scrollbar{overflow-y:scroll;background:transparent;box-shadow:none;width:0px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8d8d8d;border-radius:100px;width:10px;height:10px!important;overflow-x:hidden}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#f0f0f0;border-radius:100px;border:none;height:50px!important;overflow:auto}\"]\n    });\n  }\n  return ChatComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}